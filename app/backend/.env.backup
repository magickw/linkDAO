# LinkDAO Backend Environment Variables

# OpenAI API Configuration
# Get your API key from https://platform.openai.com/api-keys
OPENAI_API_KEY=sk-proj--A7CgDCAOyZ7d0Lo3lu2AY5hOqI63GSSsUBaa_NpBDETyITJoGIUFHxXxQDz8eEINEAN_VgkHZ4-T3BlbkFJbKZtKp6rcGdMfevSjSb56Li70scISOz0BkjmAQOqV9w4ZsvGMFxroSy6cgiSnJaeLKQN9evXYA

# Pinecone Vector Database Configuration (optional but recommended)
# Get your API key from https://app.pinecone.io/
PINECONE_API_KEY=pcsk_mXFQY_8N5331V63mzfFh2fFYXGwBYdS983SxFms5sX6dGF6VLmQEyUeYaRe9SMHTGRKpL
PINECONE_ENVIRONMENT=us-east-1
PINECONE_INDEX_NAME=linkdao

# Ethereum RPC URL for on-chain data
RPC_URL=https://mainnet.base.org

# Server Configuration
PORT=3002
NODE_ENV=production

# Frontend URL for CORS - allowing multiple origins
FRONTEND_URL=https://linkdao.vercel.app,http://localhost:3000
BACKEND_URL=https://linkdao-backend.onrender.com

# JWT Secret for authentication
JWT_SECRET=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySW5mb3JtYXRpb24iOnsiaWQiOiI5NGU0OWRiNy0xY2U1LTQyN2QtODY2MS1hMDFmOWI3NDBlYzIiLCJlbWFpbCI6InBldGVyZ3VvMTk4M0BnbWFpbC5jb20iLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwicGluX3BvbGljeSI6eyJyZWdpb25zIjpbeyJkZXNpcmVkUmVwbGljYXRpb25Db3VudCI6MSwiaWQiOiJGUkExIn0seyJkZXNpcmVkUmVwbGljYXRpb25Db3VudCI6MSwiaWQiOiJOWUMxIn1dLCJ2ZXJzaW9uIjoxfSwibWZhX2VuYWJsZWQiOmZhbHNlLCJzdGF0dXMiOiJBQ1RJVkUifSwiYXV0aGVudGljYXRpb25UeXBlIjoic2NvcGVkS2V5Iiwic2NvcGVkS2V5S2V5IjoiODdiY2M2YjBkYTJhZGI1NjkwOWMiLCJzY29wZWRLZXlTZWNyZXQiOiJmMjA1ZDI2NDA5NTBjNzdhMTA5N2FkMGJlNDg4NTQ3ZWFmODMyNTQ0N2I5MTY3YWE5ZDExN2UzNDYyM2UyOTlhIiwiZXhwIjoxNzg3OTQwMzcwfQ.NlUYAvIXM3VnNiB4SLHQz5ZckYN6jqvDeHPU_FKSft0
JWT_EXPIRES_IN=24h
JWT_REFRESH_EXPIRES_IN=7d

# Smart Contract Addresses
PROFILE_REGISTRY_ADDRESS=0x742d35Cc6335F0652131b4b7d3bde61007c4d8e5
FOLLOW_MODULE_ADDRESS=0x3f5CE5FBFe3E9af3971dD833D26bA9b5C936f0bE
PAYMENT_ROUTER_ADDRESS=0xbDA5747bFD65F08deb54cb465eB87D40e51B197E
GOVERNANCE_ADDRESS=0x2279B7A0a67DB372996a5FaB50D91eAA73d2eBe6
TOKEN_ADDRESS=0x8A791620dd6260079BF849Dc5567aDC3F2FdC318

# LDAO Token Contract Addresses (to be updated after deployment)
LDAO_TOKEN_ADDRESS=0x...
TIP_ROUTER_ADDRESS=0x...
REWARD_POOL_ADDRESS=0x...

# Database Configuration
# For PostgreSQL, use a connection string like:
# DATABASE_URL=postgresql://username:password@localhost:5432/linkdao
# For deployment, you can use services like:
# - Supabase (https://supabase.com/)
# - Render PostgreSQL (https://render.com/docs/databases)
# - Heroku Postgres (https://www.heroku.com/postgres)
DATABASE_URL=postgresql://neondb_owner:npg_eqKdwjDV7R9I@ep-quiet-lake-adx0tq66-pooler.c-2.us-east-1.aws.neon.tech/neondb?sslmode=require&channel_binding=require



# IPFS Configuration
IPFS_PROJECT_ID=87bcc6b0da2adb56909c
IPFS_PROJECT_SECRET=yf205d2640950c77a1097ad0be488547eaf8325447b9167aa9d117e34623e299a
IPFS_GATEWAY=https://gateway.pinata.cloud

# Image Processing Settings
MAX_IMAGE_SIZE=10485760  # 10MB
MAX_PROFILE_IMAGE_SIZE=5242880  # 5MB
SUPPORTED_FORMATS=jpeg,png,webp,gif
THUMBNAIL_SIZES=150,300,600,1200
IMAGE_QUALITY=85
IMAGE_COMPRESSION_ENABLED=true

# Image Storage Limits
MAX_IMAGES_PER_LISTING=10
MAX_IMAGES_PER_USER=100
IMAGE_CLEANUP_ENABLED=true
CLEANUP_INTERVAL_HOURS=24
RETENTION_DAYS=30

# =============================================================================
# PAYMENT SYSTEM CONFIGURATION
# =============================================================================

# Stripe Configuration (Fiat Payments)
STRIPE_ENABLED=true
STRIPE_SECRET_KEY=sk_test_...
STRIPE_PUBLISHABLE_KEY=pk_test_...
STRIPE_WEBHOOK_SECRET=whsec_...
STRIPE_API_VERSION=2023-10-16

# Crypto Payment Configuration
CRYPTO_PAYMENTS_ENABLED=true
WEB3_PROVIDER_URL=https://mainnet.infura.io/v3/1f6040196b894a6e90ef4842c62503d7
PAYMENT_ROUTER_ADDRESS=0x...
SUPPORTED_TOKENS=ETH,USDC,USDT,DAI

# Escrow Configuration
ESCROW_ENABLED=true
ESCROW_CONTRACT_ADDRESS=0x...
ESCROW_FEE_PERCENTAGE=2.5
ESCROW_DISPUTE_TIMEOUT_DAYS=7
ESCROW_AUTO_RELEASE_DAYS=14

# Payment Limits and Fees
MIN_CRYPTO_AMOUNT=1
MAX_CRYPTO_AMOUNT=100000
MIN_FIAT_AMOUNT=5
MAX_FIAT_AMOUNT=10000
FIAT_PROCESSING_FEE_PERCENTAGE=2.9
FIAT_PROCESSING_FEE_FIXED=0.30

# Payment Timeouts
PAYMENT_TIMEOUT_SECONDS=300
TRANSACTION_CONFIRMATION_BLOCKS=3
PAYMENT_RETRY_ATTEMPTS=3

# =============================================================================
# ORDER MANAGEMENT CONFIGURATION
# =============================================================================

# Order Processing Settings
ORDER_PROCESSING_ENABLED=true
AUTO_ORDER_CONFIRMATION=true
ORDER_TIMEOUT_HOURS=24
ORDER_CLEANUP_ENABLED=true

# Order Status Settings
DEFAULT_ORDER_STATUS=payment_pending
AUTO_STATUS_UPDATES=true
STATUS_NOTIFICATION_ENABLED=true

# Shipping Integration
SHIPPING_ENABLED=true
SHIPPING_PROVIDERS=ups,fedex,dhl,usps
DEFAULT_SHIPPING_METHOD=standard
TRACKING_UPDATE_INTERVAL=3600  # 1 hour

# Order Limits
MAX_ORDERS_PER_USER_PER_DAY=50
MAX_ORDER_ITEMS=20
ORDER_HISTORY_RETENTION_DAYS=365

# =============================================================================
# CACHING CONFIGURATION
# =============================================================================

# Redis Configuration
REDIS_ENABLED=true
REDIS_URL=redis://red-d2p2g5vdiees73bgcfg0:6379
REDIS_DB=0
REDIS_POOL_SIZE=10
REDIS_KEY_PREFIX=marketplace:

# Cache TTL Settings (in seconds)
CACHE_ENS_TTL=300          # 5 minutes
CACHE_IMAGE_METADATA_TTL=3600  # 1 hour
CACHE_LISTING_TTL=300      # 5 minutes
CACHE_ORDER_TTL=60         # 1 minute
CACHE_PAYMENT_VALIDATION_TTL=30  # 30 seconds

# Cache Prefixes
CACHE_PREFIX_ENS=ens:
CACHE_PREFIX_IMAGE=img:
CACHE_PREFIX_LISTING=listing:
CACHE_PREFIX_ORDER=order:
CACHE_PREFIX_PAYMENT=payment:

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================

# API Security
API_RATE_LIMIT_ENABLED=true
API_RATE_LIMIT_WINDOW=900  # 15 minutes
API_RATE_LIMIT_MAX_REQUESTS=1000
API_CORS_ORIGINS=https://yourdomain.com,https://www.yourdomain.com

# File Upload Security
FILE_UPLOAD_VIRUS_SCAN=true
FILE_UPLOAD_CONTENT_VALIDATION=true
ALLOWED_UPLOAD_ORIGINS=https://yourdomain.com

# Encryption Settings
ENCRYPTION_ENABLED=true
ENCRYPTION_KEY=your_32_character_encryption_key
HASH_SALT_ROUNDS=12

# =============================================================================
# MONITORING AND LOGGING
# =============================================================================

# Logging Configuration
LOG_LEVEL=info
LOG_FORMAT=json
LOG_FILE_ENABLED=true
LOG_FILE_PATH=/var/log/marketplace/app.log
LOG_ROTATION_ENABLED=true
LOG_MAX_SIZE=100MB
LOG_MAX_FILES=10

# Monitoring Settings
MONITORING_ENABLED=true
METRICS_ENABLED=true
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_INTERVAL=30  # seconds

# Error Tracking
ERROR_TRACKING_ENABLED=true
SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id
ERROR_SAMPLE_RATE=0.1

# Performance Monitoring
PERFORMANCE_MONITORING_ENABLED=true
SLOW_QUERY_THRESHOLD=1000  # milliseconds
SLOW_REQUEST_THRESHOLD=5000  # milliseconds

# =============================================================================
# NOTIFICATION CONFIGURATION
# =============================================================================

# Email Notifications
EMAIL_ENABLED=true
SMTP_HOST=smtp.yourdomain.com
SMTP_PORT=587
SMTP_USER=noreply@yourdomain.com
SMTP_PASSWORD=your_smtp_password
SMTP_FROM_NAME=Marketplace
SMTP_FROM_EMAIL=noreply@yourdomain.com

# Push Notifications
PUSH_NOTIFICATIONS_ENABLED=true
FIREBASE_PROJECT_ID=your_firebase_project
FIREBASE_PRIVATE_KEY=your_firebase_private_key
FIREBASE_CLIENT_EMAIL=your_firebase_client_email

# Notification Types
NOTIFY_ORDER_CREATED=true
NOTIFY_ORDER_STATUS_CHANGE=true
NOTIFY_PAYMENT_RECEIVED=true
NOTIFY_LISTING_PUBLISHED=true

# =============================================================================
# FEATURE FLAGS
# =============================================================================

# Core Features
FEATURE_ENS_INTEGRATION=true
FEATURE_IMAGE_STORAGE=true
FEATURE_ENHANCED_ORDERS=true
FEATURE_MULTI_PAYMENT=true

# Payment Methods
FEATURE_CRYPTO_PAYMENTS=true
FEATURE_FIAT_PAYMENTS=true
FEATURE_ESCROW_PAYMENTS=true

# Advanced Features
FEATURE_REAL_TIME_UPDATES=true
FEATURE_ADVANCED_SEARCH=true
FEATURE_ANALYTICS=true
FEATURE_ADMIN_PANEL=true

# Experimental Features
FEATURE_AI_RECOMMENDATIONS=false
FEATURE_SOCIAL_FEATURES=false
FEATURE_MOBILE_APP=false

# =============================================================================
# DEVELOPMENT/STAGING OVERRIDES
# =============================================================================

# Development Environment Overrides
# Uncomment for development environment
NODE_ENV=development
PORT=10000

# JWT Configuration
JWT_SECRET=your-super-secure-jwt-secret-at-least-32-characters-long
MASTER_ENCRYPTION_KEY=0123456789abcdef0123456789abcdef0123456789abcdef0123456789abcdef
TOKEN_SECRET=your-token-secret-for-access-tokens


# Staging Environment Overrides
# Uncomment for staging environment
# NODE_ENV=staging
# DATABASE_URL=postgresql://staging_user:password@staging-db:5432/marketplace_staging
# CDN_BASE_URL=https://staging-cdn.yourdomain.com
# STRIPE_SECRET_KEY=sk_test_...
# ERROR_SAMPLE_RATE=1.0

# =============================================================================
# PRODUCTION SETTINGS
# =============================================================================

# Production Environment Settings
# Uncomment for production environment
# NODE_ENV=production
# LOG_LEVEL=warn
# API_RATE_LIMIT_MAX_REQUESTS=500
# CACHE_TTL_MULTIPLIER=2
# ERROR_SAMPLE_RATE=0.01
# PERFORMANCE_MONITORING_SAMPLE_RATE=0.1

# Production Security
# SSL_ENABLED=true
# HSTS_ENABLED=true
# SECURE_COOKIES=true
# CSRF_PROTECTION=true

# =============================================================================
# BACKUP AND DISASTER RECOVERY
# =============================================================================

# Database Backup
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *  # Daily at 2 AM
BACKUP_RETENTION_DAYS=30
BACKUP_STORAGE_PATH=/backups/marketplace
BACKUP_COMPRESSION=true

# File Backup
FILE_BACKUP_ENABLED=true
FILE_BACKUP_SCHEDULE=0 3 * * *  # Daily at 3 AM
FILE_BACKUP_RETENTION_DAYS=7

# Disaster Recovery
DR_ENABLED=true
DR_REPLICATION_ENABLED=true
DR_FAILOVER_TIMEOUT=300  # 5 minutes

# =============================================================================
# THIRD-PARTY INTEGRATIONS
# =============================================================================

# Analytics
GOOGLE_ANALYTICS_ID=GA-XXXXXXXXX
MIXPANEL_TOKEN=your_mixpanel_token

# Customer Support
INTERCOM_APP_ID=your_intercom_app_id
ZENDESK_SUBDOMAIN=your_zendesk_subdomain

# Social Media
TWITTER_API_KEY=your_twitter_api_key
DISCORD_BOT_TOKEN=your_discord_bot_token

# =============================================================================
# DEPLOYMENT CONFIGURATION
# =============================================================================

# Application Settings
APP_NAME=marketplace-enhancements
APP_VERSION=1.0.0
APP_PORT=3000
APP_HOST=0.0.0.0

# Cluster Settings
CLUSTER_MODE=false
WORKER_PROCESSES=auto
MAX_MEMORY_USAGE=1GB

# Health Checks
HEALTH_CHECK_PATH=/health
READINESS_CHECK_PATH=/ready
LIVENESS_CHECK_PATH=/live

# Graceful Shutdown
SHUTDOWN_TIMEOUT=30000  # 30 seconds
KEEP_ALIVE_TIMEOUT=5000  # 5 seconds

# For Redis Cluster
REDIS_CLUSTER_NODES=host1:port1,host2:port2,host3:port3
# OR
REDIS_CLUSTER_URL=redis://host:port

# ======================
# SSL/TLS CONFIGURATION
# ======================
SSL_ENABLED=true
SSL_PORT=443
SSL_CERT_PATH=/path/to/certificate.crt
SSL_KEY_PATH=/path/to/private.key
SSL_CA_PATH=/path/to/ca-bundle.crt
SSL_PASSPHRASE=your_ssl_passphrase


# ======================
# RATE LIMITING
# ======================
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# ======================
# LOAD BALANCER CONFIGURATION
# ======================
LB_ENABLED=false
LB_ALGORITHM=round-robin
LB_SERVERS=localhost:10000:1,localhost:10001:1,localhost:10002:1

# Health Check Configuration
LB_HEALTH_CHECK_ENABLED=true
LB_HEALTH_CHECK_INTERVAL=30000
LB_HEALTH_CHECK_TIMEOUT=5000
LB_HEALTH_CHECK_PATH=/health
LB_HEALTH_CHECK_STATUS=200

# Sticky Sessions
LB_STICKY_SESSIONS=false
LB_STICKY_COOKIE_NAME=lb-session
LB_STICKY_TTL=3600000

# Failover
LB_FAILOVER_ENABLED=true
LB_MAX_RETRIES=3
LB_RETRY_DELAY=1000

# ======================
# CLUSTER CONFIGURATION
# ======================
CLUSTER_ENABLED=false
CLUSTER_WORKERS=0

# ======================
# MONITORING & LOGGING
# ======================
LOG_LEVEL=info
LOG_FORMAT=json

# External monitoring services
SENTRY_DSN=https://your-sentry-dsn
NEW_RELIC_LICENSE_KEY=your_new_relic_key

# ======================
# GRACEFUL SHUTDOWN
# ======================
GRACEFUL_SHUTDOWN_TIMEOUT=30000

# ======================
# PERFORMANCE TUNING
# ======================
# Connection pool settings
DB_POOL_MIN=2
DB_POOL_MAX=10
DB_POOL_IDLE_TIMEOUT=30000

# Redis connection settings
REDIS_MAX_RETRIES_PER_REQUEST=3
REDIS_RETRY_DELAY_ON_FAILOVER=100

# ======================
# FEATURE FLAGS
# ======================
ENABLE_METRICS=true
ENABLE_TRACING=true
ENABLE_PROFILING=false



