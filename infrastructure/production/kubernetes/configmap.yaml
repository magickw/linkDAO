apiVersion: v1
kind: ConfigMap
metadata:
  name: web3-marketplace-config
  namespace: web3-marketplace-prod
data:
  NODE_ENV: "production"
  LOG_LEVEL: "info"
  METRICS_ENABLED: "true"
  HEALTH_CHECK_INTERVAL: "30"
  DATABASE_POOL_SIZE: "20"
  REDIS_POOL_SIZE: "10"
  RATE_LIMIT_WINDOW: "900000"
  RATE_LIMIT_MAX: "1000"
  CORS_ORIGIN: "https://marketplace.web3platform.com"
  SESSION_TIMEOUT: "3600000"
  JWT_EXPIRY: "86400"
  BLOCKCHAIN_NETWORK: "mainnet"
  IPFS_GATEWAY: "https://gateway.pinata.cloud"
  CDN_URL: "https://cdn.web3marketplace.com"
  MONITORING_ENDPOINT: "https://monitoring.web3marketplace.com"
---
apiVersion: v1
kind: ConfigMap
metadata:
  name: monitoring-config
  namespace: web3-marketplace-monitoring
data:
  prometheus.yml: |
    global:
      scrape_interval: 15s
      evaluation_interval: 15s
    
    rule_files:
      - "/etc/prometheus/rules/*.yml"
    
    alerting:
      alertmanagers:
        - static_configs:
            - targets:
              - alertmanager:9093
    
    scrape_configs:
      - job_name: 'web3-marketplace-backend'
        static_configs:
          - targets: ['backend-service:3000']
        metrics_path: '/metrics'
        scrape_interval: 10s
      
      - job_name: 'web3-marketplace-frontend'
        static_configs:
          - targets: ['frontend-service:3001']
        metrics_path: '/metrics'
        scrape_interval: 30s
      
      - job_name: 'postgres-exporter'
        static_configs:
          - targets: ['postgres-exporter:9187']
      
      - job_name: 'redis-exporter'
        static_configs:
          - targets: ['redis-exporter:9121']
      
      - job_name: 'nginx-exporter'
        static_configs:
          - targets: ['nginx-exporter:9113']
      
      - job_name: 'node-exporter'
        static_configs:
          - targets: ['node-exporter:9100']
      
      - job_name: 'blockchain-monitor'
        static_configs:
          - targets: ['blockchain-monitor:8080']
        scrape_interval: 60s